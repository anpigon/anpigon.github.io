<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="yfKOiBPD8WlKH3NPG_CG1zr4MsCgCG1YVdGKhMS2CKc">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Noto Serif KR:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: true,
    pangu: false,
    algolia: {
      appID: 'YY693DUDAI',
      apiKey: 'db449d453b150820f66e7bc3d4523a17',
      indexName: 'my-hexo-blog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '복사',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="안녕하세요. @anpigon 입니다.이번에는 Pull to Refresh 기능을 구현해봅니다. Pull Down 또는 Pull Up 동작으로 목록을 업데이트하는 것인데… 텍스트로 설명하기 어려우니 앱 동작 화면으로 설명을 대신하겠습니다. 아래는 Pull Down하여 목록을 업데이트하는 화면입니다.">
<meta name="keywords" content="Flutter">
<meta property="og:type" content="article">
<meta property="og:title" content="[Flutter] 플러터(Flutter) 모바일 앱 개발 - Pull to Refresh 구현하기">
<meta property="og:url" content="https://anpigon.github.io/dclick/@anpigon/flutter-pull-to-refresh--1540565403497/index.html">
<meta property="og:site_name" content="안피곤님의 블로그">
<meta property="og:description" content="안녕하세요. @anpigon 입니다.이번에는 Pull to Refresh 기능을 구현해봅니다. Pull Down 또는 Pull Up 동작으로 목록을 업데이트하는 것인데… 텍스트로 설명하기 어려우니 앱 동작 화면으로 설명을 대신하겠습니다. 아래는 Pull Down하여 목록을 업데이트하는 화면입니다.">
<meta property="og:locale" content="ko">
<meta property="og:updated_time" content="2019-11-11T13:41:49.840Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[Flutter] 플러터(Flutter) 모바일 앱 개발 - Pull to Refresh 구현하기">
<meta name="twitter:description" content="안녕하세요. @anpigon 입니다.이번에는 Pull to Refresh 기능을 구현해봅니다. Pull Down 또는 Pull Up 동작으로 목록을 업데이트하는 것인데… 텍스트로 설명하기 어려우니 앱 동작 화면으로 설명을 대신하겠습니다. 아래는 Pull Down하여 목록을 업데이트하는 화면입니다.">

<link rel="canonical" href="https://anpigon.github.io/dclick/@anpigon/flutter-pull-to-refresh--1540565403497/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>[Flutter] 플러터(Flutter) 모바일 앱 개발 - Pull to Refresh 구현하기 | 안피곤님의 블로그</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-20589042-10"></script>
    <script pjax>
      var host = window.location.hostname;
      if (host !== "localhost" || !true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-20589042-10');
      }
    </script>






  
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2365531018407022",
          enable_page_level_ads: false
     });
</script>
  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">안피곤님의 블로그</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">코딩, 독서, 여행, 영화, 맛집</h1>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>홈</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>태그<span class="badge">139</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>카테고리<span class="badge">25</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>아카이브<span class="badge">323</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>검색
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input" id="search-input"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

  
</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="ko">
    <link itemprop="mainEntityOfPage" href="https://anpigon.github.io/dclick/@anpigon/flutter-pull-to-refresh--1540565403497/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/me.jpg">
      <meta itemprop="name" content="안피곤">
      <meta itemprop="description" content="시간이 천천히 갔으면 좋겠다.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="안피곤님의 블로그">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          [Flutter] 플러터(Flutter) 모바일 앱 개발 - Pull to Refresh 구현하기
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-10-26 23:50:06" itemprop="dateCreated datePublished" datetime="2018-10-26T23:50:06+09:00">2018-10-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2019-11-11 22:41:49" itemprop="dateModified" datetime="2019-11-11T22:41:49+09:00">2019-11-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/개발-이야기/" itemprop="url" rel="index">
                    <span itemprop="name">개발 이야기</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/개발-이야기/플러터-flutter/" itemprop="url" rel="index">
                    <span itemprop="name">플러터(Flutter)</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="firestore-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/dclick/@anpigon/flutter-pull-to-refresh--1540565403497/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="/dclick/@anpigon/flutter-pull-to-refresh--1540565403497/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
            <div style="margin-bottom:35px;margin-top:-20px;">
              <!-- 블로그 본문 상단 광고 -->
              <ins class="adsbygoogle"
                  style="display:block"
                  data-ad-client="ca-pub-2365531018407022"
                  data-ad-slot="3390644000"
                  data-ad-format="auto"
                  data-full-width-responsive="true"></ins>
              <script>
                  (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>

        <p>안녕하세요. @anpigon 입니다.</p><p>이번에는 <strong>Pull to Refresh</strong> 기능을 구현해봅니다. <strong>Pull Down</strong> 또는 <strong>Pull Up</strong> 동작으로 목록을 업데이트하는 것인데… 텍스트로 설명하기 어려우니 앱 동작 화면으로 설명을 대신하겠습니다. 아래는 Pull Down하여 목록을 업데이트하는 화면입니다.</p><a id="more"></a>

<center><img data-src="https://cdn.steemitimages.com/DQmWjQNYZTGRfSZZP6MB3YrfsRzeEustuWh8vVc1LJy1hda/2222222222.gif"></center>
<p><br><strong>Pull to Refresh</strong> 기능을 구현해놓은 라이브러리가 있어 덕분에 쉽게 구현할 수 있었습니다. pull_to_refresh 라이브러리와 샘플 소스는 아래 깃허브에서 다운로드 받을 수 있습니다.</p>
<ul>
<li><a href="https://pub.dartlang.org/packages/pull_to_refresh" target="_blank" rel="noopener">https://pub.dartlang.org/packages/pull_to_refresh</a></li>
</ul>
<center><br>᛫  ᛫  ᛫  ᛫  ᛫<br></center>
<hr>
<p><strong>이전 글</strong></p>
<ul>
<li><a href="https://steemit.com/dclick/@anpigon/-flutter--1538895504796" target="_blank" rel="noopener">모바일 앱 개발 : Flutter 시작하기 #1 - Get started</a></li>
<li><a href="https://steemit.com/kr/@anpigon/flutter-2-write-your-first-flutter-app-part-1" target="_blank" rel="noopener">모바일 앱 개발 : Flutter 시작하기 #2 - First Flutter App (1)</a></li>
<li><a href="https://steemit.com/dclick/@anpigon/-flutter-3-write-your-first-flutter-app-part-12-1539616614961" target="_blank" rel="noopener">모바일 앱 개발 : Flutter 시작하기 #3 - First Flutter App (2)</a></li>
<li><a href="https://steemit.com/dclick/@anpigon/-flutter-4-first-flutter-app-3-1539963641589" target="_blank" rel="noopener">모바일 앱 개발 : Flutter 시작하기 #4 - First Flutter App (3)</a></li>
<li><a href="https://steemit.com/@anpigon/-flutter-5-first-flutter-app-4-1540135389352" target="_blank" rel="noopener">모바일 앱 개발 : Flutter 시작하기 #5 - First Flutter App (4)</a></li>
<li><a href="https://steemit.com/dclick/@anpigon/flutter--1540311025725" target="_blank" rel="noopener">플러터(Flutter) 모바일 앱 개발 - 스팀잇 피드 구현하기</a></li>
</ul>
<hr>
<center><br>᛫  ᛫  ᛫  ᛫  ᛫<br></center><br>
<h1 id="pull-to-refresh-구현하기"><a class="markdownIt-Anchor" href="#pull-to-refresh-구현하기"></a> Pull To Refresh 구현하기</h1>
<p><br>아래와 같이 <code>pubspec.yml</code>에 필요한 라이브러리 추가한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  http: ^0.11.3+17</span><br><span class="line">  pull_to_refresh: ^1.1.6</span><br></pre></td></tr></table></figure>
<center><br>᛫  ᛫  ᛫  ᛫  ᛫<br></center><br>
<h1 id="서버에서-이미지-목록-가져오기"><a class="markdownIt-Anchor" href="#서버에서-이미지-목록-가져오기"></a> 서버에서 이미지 목록 가져오기</h1>
<p><br>그다음 이미지 목록을 가져오는 함수를 구현한다. 한 번에 30개씩 가져오도록 하였다. 그리고 가져온 데이터에서 <code>image_url</code>만 배열로 반환한다.</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:async'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:convert'</span> show json;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:http/http.dart'</span> <span class="keyword">as</span> HTTP;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:pull_to_refresh/pull_to_refresh.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyHomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyHomePage</span>&gt; ｛</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">int</span> <span class="title">_indexPage</span> = 2; // 페이지 번호</span></span><br><span class="line"><span class="class">  <span class="title">int</span> <span class="title">_rowCount</span> = 30; // 행 개수</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">Future</span>  <span class="title">_fetch</span>() ｛</span></span><br><span class="line"><span class="class">    <span class="title">return</span> <span class="title">http</span>.<span class="title">get</span>('<span class="title">http</span>://<span class="title">image</span>.<span class="title">baidu</span>.<span class="title">com</span>/<span class="title">channel</span>/<span class="title">listjson</span>?<span class="title">pn</span>=$<span class="title">_indexPage</span>&amp;<span class="title">rn</span>=$<span class="title">_rowCount</span>&amp;<span class="title">tag1</span>=％<span class="title">E6</span>％98％8<span class="title">E</span>％<span class="title">E6</span>％98％9<span class="title">F</span>&amp;<span class="title">tag2</span>=％<span class="title">E5</span>％85％<span class="title">A8</span>％<span class="title">E9</span>％83％<span class="title">A8</span>&amp;<span class="title">ie</span>=<span class="title">utf8</span>')</span></span><br><span class="line"><span class="class">        .<span class="title">then</span>((<span class="title">http</span>.<span class="title">Response</span> <span class="title">response</span>) ｛</span></span><br><span class="line"><span class="class">      <span class="title">Map</span> <span class="title">map</span> = <span class="title">json</span>.<span class="title">decode</span>(<span class="title">response</span>.<span class="title">body</span>);</span></span><br><span class="line"><span class="class">      <span class="title">return</span> <span class="title">map</span>["<span class="title">data</span>"].<span class="title">map</span>((<span class="title">item</span>) =&gt; <span class="title">item</span>["<span class="title">image_url</span>"]).<span class="title">toList</span>().<span class="title">sublist</span>(0, <span class="title">_rowCount</span>);</span></span><br><span class="line"><span class="class">    ｝);</span></span><br><span class="line"><span class="class">  ｝</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// ... 이하 생략 ...</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>샘플 소스에 있는 로직을 그대로 사용하였다. 위에서 사용한 URL은 바이두 검색사이트에서 배우들의 이미지를 검색해오는 API이다.</p>
</blockquote>
<center><br>᛫  ᛫  ᛫  ᛫  ᛫<br></center><br>
<h1 id="initstate-함수-구현하기"><a class="markdownIt-Anchor" href="#initstate-함수-구현하기"></a> initState 함수 구현하기</h1>
<p><br>앱이 실행되고 첫 화면에 보여줄 데이터를 가져오는 함수를 구현하자. 아래와 같이 <code>initState()</code> 함수를 오버라이드(override)하여 구현한다. <a href="https://docs.flutter.io/flutter/widgets/State/initState.html" target="_blank" rel="noopener">initState</a> 함수는 <strong>State</strong>가 트리에 삽입되면 자동으로 호출된다.</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">RefreshController _controller; <span class="comment">// pull_to_refreh 컨트롤러</span></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; _data = []; <span class="comment">// 가져온 데이터를 담는 변수</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="keyword">void</span> initState() ｛</span><br><span class="line">  <span class="keyword">super</span>.initState();</span><br><span class="line">  _controller = <span class="keyword">new</span> RefreshController();</span><br><span class="line">  _fetch().then((array) ｛</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">in</span> array) ｛</span><br><span class="line">      _data.add(item);</span><br><span class="line">    ｝</span><br><span class="line">    setState(() =&gt; _indexPage++); <span class="comment">// 화면 업데이트하고 페이지 번호 증가</span></span><br><span class="line">  ｝);</span><br><span class="line">｝</span><br></pre></td></tr></table></figure>
<center><br>᛫  ᛫  ᛫  ᛫  ᛫<br></center><br>
<h1 id="이미지-위젯-구현하기"><a class="markdownIt-Anchor" href="#이미지-위젯-구현하기"></a> 이미지 위젯 구현하기</h1>
<p><br>목록에서 보여줄 이미지 위젯을 구현한다. <a href="https://docs.flutter.io/flutter/widgets/RepaintBoundary-class.html" target="_blank" rel="noopener">RepaintBoundary</a>와 <a href="https://docs.flutter.io/flutter/widgets/Image-class.html" target="_blank" rel="noopener">Image</a> 위젯을 사용하였다. Image 위젯의 <code>Image.network</code> 생성자를 사용하면 URL에서 이미지를 바로 출력할 수 있다. 그리고 <code>fit</code> 속성에 BoxFit.cover를 사용하여 이미지를 crop해서 여백없이 이쁘게 보여주자. <code>fit</code> 속성에 대한 자세한 설명은 <a href="https://docs.flutter.io/flutter/painting/BoxFit-class.html" target="_blank" rel="noopener">여기</a>를 참고하자.</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildImage(context, index) ｛</span><br><span class="line">  <span class="keyword">if</span> (_data[index] == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> Container(); <span class="comment">// 이미지가 없는 경우</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> RepaintBoundary(</span><br><span class="line">    child: <span class="keyword">new</span> Image.network(</span><br><span class="line">      _data[index],</span><br><span class="line">      fit: BoxFit.cover,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">｝</span><br></pre></td></tr></table></figure>
<center><br>᛫  ᛫  ᛫  ᛫  ᛫<br></center><br>
<h1 id="목록-위젯-구현하기"><a class="markdownIt-Anchor" href="#목록-위젯-구현하기"></a> 목록 위젯 구현하기</h1>
<p><br>이제 목록을 출력할 위젯을 구현하자. <a href="https://docs.flutter.io/flutter/widgets/GridView-class.html" target="_blank" rel="noopener">GridView</a> 위젯을 사용하여 한 행에 이미지가 2개씩 예쁘게 보이도록 한다. <a href="https://docs.flutter.io/flutter/rendering/SliverGridDelegateWithFixedCrossAxisCount-class.html" target="_blank" rel="noopener">SliverGridDelegateWithFixedCrossAxisCount</a> 클래스를 사용하여 그리드 레이아웃을 작성한다.</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildBody() ｛</span><br><span class="line">  <span class="keyword">if</span> (_data.length &gt; <span class="number">0</span>) ｛</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> SmartRefresher(</span><br><span class="line">      enablePullDown: <span class="keyword">true</span>,</span><br><span class="line">      enablePullUp: <span class="keyword">true</span>,</span><br><span class="line">      controller: _controller,</span><br><span class="line">      child: <span class="keyword">new</span> GridView.builder(</span><br><span class="line">        gridDelegate: <span class="keyword">new</span> SliverGridDelegateWithFixedCrossAxisCount(crossAxisCount: <span class="number">2</span>),</span><br><span class="line">        itemCount: _data.length,</span><br><span class="line">        itemBuilder: _buildImage,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  ｝ <span class="keyword">else</span> ｛</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> Center(</span><br><span class="line">      child: CircularProgressIndicator()</span><br><span class="line">    );</span><br><span class="line">  ｝</span><br><span class="line">｝</span><br></pre></td></tr></table></figure>
<center><br>᛫  ᛫  ᛫  ᛫  ᛫<br></center>
<p><br>아래는 지금까지 구현한 화면이다. 아직 refresh 기능은 작동하지 않는다.</p>
<center><img data-src="https://steemitimages.com/300x0/https://imgur.com/REazr5i.png"></center>
<center><br>᛫  ᛫  ᛫  ᛫  ᛫<br></center>
<h1 id="핵심-기능-refresh-구현하기"><a class="markdownIt-Anchor" href="#핵심-기능-refresh-구현하기"></a> 핵심 기능 Refresh 구현하기</h1>
<p><br>이제 핵심 기능인 <strong>Pull Up</strong> 과 <strong>Pull Down</strong>의 콜백 함수 구현하자. <code>_onRefresh()</code> 함수가 받는 인자값 <code>up</code>가 <strong>True</strong>면 Pull Down이 호출된 것이고, <strong>False</strong>면 Pull Up이 호출된 것이다. 다시 쉽게 말하면 True면 **상단 위치에서 아래로 당긴 것(Pull Down)**이고, False면 **하단 위치에서 위로 당긴 것(Pull Up)**이다. 이렇게 설명하면 모두 이해했으리라 생각한다.</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> _onRefresh(<span class="built_in">bool</span> up) ｛</span><br><span class="line">    <span class="keyword">if</span> (up) ｛</span><br><span class="line">      <span class="comment">// Pull Down 이 호출된 경우</span></span><br><span class="line">      _fetch().then((array) ｛</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">in</span> array) ｛</span><br><span class="line">          _data.add(item);</span><br><span class="line">        ｝</span><br><span class="line">        _controller.sendBack(up, RefreshStatus.completed);</span><br><span class="line">        setState(() =&gt; _indexPage++);</span><br><span class="line">      ｝).catchError(() ｛</span><br><span class="line">        _controller.sendBack(up, RefreshStatus.failed);</span><br><span class="line">      ｝);</span><br><span class="line">    ｝ <span class="keyword">else</span> ｛</span><br><span class="line">      <span class="comment">// Pull Up 이 호출된 경우	</span></span><br><span class="line">      _fetch().then((array) ｛</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">in</span> array) ｛</span><br><span class="line">          _data.add(item);</span><br><span class="line">        ｝</span><br><span class="line">        _controller.sendBack(up, RefreshStatus.idle);</span><br><span class="line">        setState(() =&gt; _indexPage++);</span><br><span class="line">      ｝).catchError(() ｛</span><br><span class="line">        _controller.sendBack(up, RefreshStatus.failed);</span><br><span class="line">      ｝);</span><br><span class="line">    ｝</span><br><span class="line">  ｝</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">&lt;br&gt;&lt;br&gt;이제 앞에서 작성한 `_buildBody()` 함수를 수정한다. **SmartRefresher** 위젯에 `SmartRefresher` 속성을 추가하고 `_onRefresh()` 콜백 함수를 적용한다. 이제 목록에서 Pull Up이나 Pull Down 동작을 실행하면 `_onRefresh()` 함수가 호출 될 것이다.</span><br><span class="line"></span><br><span class="line">```dart</span><br><span class="line">  Widget _buildBody() ｛</span><br><span class="line">    <span class="keyword">if</span> (_data.length &gt; <span class="number">0</span>) ｛</span><br><span class="line">      <span class="keyword">return</span>  <span class="keyword">new</span> SmartRefresher(</span><br><span class="line">        enablePullDown: <span class="keyword">true</span>,</span><br><span class="line">        enablePullUp: <span class="keyword">true</span>,</span><br><span class="line">        controller: _controller,</span><br><span class="line">        onRefresh: _onRefresh, <span class="comment">// 추가된 코드</span></span><br><span class="line">        child: <span class="keyword">new</span> GridView.builder(</span><br><span class="line">          gridDelegate: <span class="keyword">new</span> SliverGridDelegateWithFixedCrossAxisCount(crossAxisCount: <span class="number">2</span>),</span><br><span class="line">          itemCount: _data.length,</span><br><span class="line">          itemBuilder: _buildImage,</span><br><span class="line">        ),</span><br><span class="line">      );</span><br><span class="line">    ｝ <span class="keyword">else</span> ｛</span><br><span class="line">      <span class="keyword">return</span>  <span class="keyword">new</span> Center(</span><br><span class="line">          child: CircularProgressIndicator()</span><br><span class="line">      );</span><br><span class="line">    ｝</span><br><span class="line">  ｝</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">&lt;br&gt;&lt;center&gt;&lt;br&gt;᛫  ᛫  ᛫  ᛫  ᛫&lt;br&gt;&lt;/center&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"># 푸터 메세지 변경하기</span><br><span class="line"></span><br><span class="line">&lt;br&gt;목록 맨 하단에서 Pull Up 했을 때 표시되는 메시지와 아이콘을 변경해보자. 우선 `_footerCreate()` 함수를 구현하자. `ClassicIndicator` 클래스 속성에서 `refreshingText`는 진행 중일 때 표시되는 메세지이고, `idleText`는 실행되기 전 표시되는 메세지이다. 참고로 `ClassicIndicator` 클래스는 pull_to_refresh 라이브러리에서 제공하는 클래스이다. 더 자세히 알고 싶으면 [소스 코드](https:<span class="comment">//github.com/peng8350/flutter_pulltorefresh/blob/master/lib/src/indicator/classic_indicator.dart)를 참고한다.</span></span><br></pre></td></tr></table></figure>
<p>Widget _footerCreate(BuildContext context, int mode) ｛<br>
return new ClassicIndicator(<br>
mode: mode,<br>
refreshingText: ‘Loading…’,<br>
idleIcon: const Icon(Icons.arrow_upward),<br>
idleText: ‘Loadmore…’,<br>
);<br>
｝</p>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;br&gt;&lt;br&gt;그리고 다시 `_buildBody()` 함수를 수정하자. **SmartRefresher**에 `footerBuilder`와 `footerConfig` 속성을 추가한다.</span><br></pre></td></tr></table></figure>
<pre><code>  return  new SmartRefresher(
    enablePullDown: true,
    enablePullUp: true,
    controller: _controller,
    onRefresh: _onRefresh, 
    footerBuilder: _footerCreate,      // 추가된 코드
    footerConfig: new RefreshConfig(), // 추가된 코드
    child: new GridView.builder(
      gridDelegate: new SliverGridDelegateWithFixedCrossAxisCount(crossAxisCount: 2),
      itemCount: _data.length,
      itemBuilder: _buildImage,
    ),
  );
</code></pre>
<pre class="highlight"><code class>
&lt;center&gt;&lt;br&gt;᛫  ᛫  ᛫  ᛫  ᛫&lt;br&gt;&lt;/center&gt;&lt;br&gt;

오늘 완성된 앱의 동작 화면이다. 스크롤 하면 한국 스타들도 많이 보인다.

&lt;center&gt;&lt;img src='https://cdn.steemitimages.com/DQmQLmdbPrj5M71zZUJcoqdXJ38yuxh5151HuLLhs3TgjSH/11111111111.gif'&gt;&lt;/center&gt;

&lt;center&gt;&lt;br&gt;᛫  ᛫  ᛫  ᛫  ᛫&lt;br&gt;&lt;/center&gt;&lt;br&gt;

플러터에서 제공하는 [API 문서](https://docs.flutter.io/index.html)를 보면 플러터에서 제공하는 클래스와 컴포넌트가 상당히 많다. 그러나 API 문서의 내용을 모두 읽어보고 개발하기에는 문서 양이 너무 많다. 결국에는 문서만 읽다가 지쳐서 금방 포기하게 된다. 

우리는 필요한 기능을 구현하면서 그때그때 공부한다. 그리고 초급일 때는 초급 수준까지만 공부하면 된다. 어려운 로직을 이해하려고 노력할 필요는 없다. 그리고 급하게 공부할 필요도 없다. IT기술은 빠른 속도로 발전하고 트렌드가 바뀐다. 방관하는 자세로 느긋하게 공부하면 된다.ㅋ

&lt;br&gt;여기까지 읽어주셔서 감사합니다.


***
#####  &lt;sub&gt; **Sponsored ( Powered by [dclick](https://www.dclick.io) )** &lt;/sub&gt;
##### [집앞 새로생긴 족발집](https://api.dclick.io/v1/c?x=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjIjoiYW5waWdvbiIsInMiOiJmbHV0dGVyLXB1bGwtdG8tcmVmcmVzaC0tMTU0MDU2NTQwMzQ5NyIsImEiOlsxNDVdLCJ1cmwiOiJodHRwczovL3N0ZWVtaXQuY29tL2RjbGljay9AbGluZGFmbHloaWdoLy0tMTUzOTg1NjIxNjQ3OSIsImlhdCI6MTU0MDU2NTQwMywiZXhwIjoxODU1OTI1NDAzfQ.xf0TueDTt95wn3pszsqQvAxJhHxgZjocmyjiSqqKJm0)
&lt;sup&gt;집앞 족발집이 생겨서 한번 먹어봤는데 ... 비싼데 맛이 반반... 싱싱한것과 오래된것을 반반...&lt;/sup&gt;
&lt;br&gt;&lt;center&gt;![logo](https://steemitimages.com/200x100/https://cdn.steemitimages.com/DQmbjkrc5UT4GgZXygAnS3mLrboAy7Y8gr7R7guB8HG3f5n/logopad500.png)&lt;br&gt;&lt;br&gt;이 글은 스팀 기반 광고 플랫폼&lt;br&gt;[dclick](https://www.dclick.io) 에 의해 작성 되었습니다.&lt;/center&gt;</code></pre>

          <!-- 스팀잇에서 작성한 글만 보여져야함(판단 기준이 애매함) -->
          <!-- Originally posted on -->
          <hr><center><tt><p>Originally posted on <a href="http://steemit.com/dclick/@anpigon/flutter-pull-to-refresh--1540565403497/" target="_blank" rel="noopener" data-pjax-state="">http://steemit.com</a></p></tt></center>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/flutter/" rel="tag"># Flutter</a>
          </div>

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/dclick/@anpigon/-8-markov-chain--1540437398396/" rel="next" title="[머신러닝] 파이썬 머신러닝 #8 - 마르코프 체인(Markov Chain) : 문장 생성하기">
                  <i class="fa fa-chevron-left"></i> [머신러닝] 파이썬 머신러닝 #8 - 마르코프 체인(Markov Chain) : 문장 생성하기
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/tasteem/@anpigon/tasteem-147c54/" rel="prev" title="석촌호수 송리단길 분위기 역대급 카페 “경성광장”">
                  석촌호수 송리단길 분위기 역대급 카페 “경성광장” <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
  <div class="comments" id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          목차
        </li>
        <li class="sidebar-nav-overview">
          흝어보기
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#pull-to-refresh-구현하기"><span class="nav-number">1.</span> <span class="nav-text"> Pull To Refresh 구현하기</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#서버에서-이미지-목록-가져오기"><span class="nav-number">2.</span> <span class="nav-text"> 서버에서 이미지 목록 가져오기</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#initstate-함수-구현하기"><span class="nav-number">3.</span> <span class="nav-text"> initState 함수 구현하기</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#이미지-위젯-구현하기"><span class="nav-number">4.</span> <span class="nav-text"> 이미지 위젯 구현하기</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#목록-위젯-구현하기"><span class="nav-number">5.</span> <span class="nav-text"> 목록 위젯 구현하기</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#핵심-기능-refresh-구현하기"><span class="nav-number">6.</span> <span class="nav-text"> 핵심 기능 Refresh 구현하기</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="안피곤"
    src="/images/me.jpg">
  <p class="site-author-name" itemprop="name">안피곤</p>
  <div class="site-description" itemprop="description">시간이 천천히 갔으면 좋겠다.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">323</span>
          <span class="site-state-item-name">포스트</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">카테고리</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">139</span>
        <span class="site-state-item-name">태그</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/anpigon" title="GitHub &rarr; https://github.com/anpigon" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:markan82@gmail.com" title="E-Mail &rarr; mailto:markan82@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>
          <!-- 정사각형 광고 -->
          <div style="margin-top: 15px;">
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-2365531018407022"
                data-ad-slot="7521850306"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          </div>
    </div>
  </aside>
  <div id="sidebar-dimmer">3</div>



      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">안피곤</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.2
  </div>

        




  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js"></script>
  <script>
    firebase.initializeApp({
      apiKey: 'AIzaSyA4QZWCWb3IuIHjbkAmO0ttIM2b-qtLTP8',
      projectId: 'next-blog-8f9a0'
    });

    function getCount(doc, increaseCount) {
      // IncreaseCount will be false when not in article page

      return doc.get().then(d => {
        var count = 0;
        if (!d.exists) { // Has no data, initialize count
          if (increaseCount) {
            doc.set({
              count: 1
            });
            count = 1;
          }
        } else { // Has data
          count = d.data().count;
          if (increaseCount) {
            // If first view this article
            doc.set({ // Increase count
              count: count + 1
            });
            count++;
          }
        }

        return count;
      });
    }

    function appendCountTo(el) {
      return count => {
        el.innerText = count;
      }
    }
  </script>
  <script pjax>
    (function() {
      var db = firebase.firestore();
      var articles = db.collection('articles');

      if (CONFIG.page.isPost) { // Is article page
        var title = document.querySelector('.post-title').innerText.trim();
        var doc = articles.doc(title);
        var increaseCount = true;
        if (localStorage.getItem(title)) {
          increaseCount = false;
        } else {
          // Mark as visited
          localStorage.setItem(title, true);
        }
        getCount(doc, increaseCount).then(appendCountTo(document.querySelector('.firestore-visitors-count')));
      } else if (CONFIG.page.isHome) { // Is index page
        var promises = [...document.querySelectorAll('.post-title')].map(element => {
          var title = element.innerText.trim();
          var doc = articles.doc(title);
          return getCount(doc);
        });
        Promise.all(promises).then(counts => {
          var metas = document.querySelectorAll('.firestore-visitors-count');
          counts.forEach((val, idx) => {
            appendCountTo(metas[idx])(val);
          });
        });
      }
    })();
  </script>








        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>
  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.getAttribute('pjax') !== null) {
      element.setAttribute('pjax', '');
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  



  <script pjax>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id: 21712,
      el: 'wpac-rating',
      color: 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.4.1/dist/instantsearch.min.css">
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.4.1/dist/instantsearch.js"></script><script src="/js/algolia-search.js"></script>













    <div id="pjax">

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://anpigon-github-io.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  function loadComments() {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: {page: {
            url: "https://anpigon.github.io/dclick/@anpigon/flutter-pull-to-refresh--1540565403497/",
            identifier: "/dclick/@anpigon/flutter-pull-to-refresh--1540565403497/",
            title: "[Flutter] 플러터(Flutter) 모바일 앱 개발 - Pull to Refresh 구현하기"
          }
        }
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://anpigon-github-io.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  }
    (function() {
      var offsetTop = document.getElementById('comments').offsetTop - window.innerHeight;
      if (offsetTop <= 0) {
        // load directly when there's no a scrollbar
        window.addEventListener('load', loadComments, false);
      } else {
        var disqus_scroll = () => {
          // offsetTop may changes because of manually resizing browser window or lazy loading images.
          var offsetTop = document.getElementById('comments').offsetTop - window.innerHeight;
          var scrollTop = window.scrollY;

          // pre-load comments a bit? (margin or anything else)
          if (offsetTop - scrollTop < 60) {
            window.removeEventListener('scroll', disqus_scroll);
            loadComments();
          }
        };
        window.addEventListener('scroll', disqus_scroll);
      }
    })();
  
</script>

    </div>
</body>
</html>
