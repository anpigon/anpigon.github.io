---
title: "프리즈마(Prisma) 사용하기 #1"
author: anpigon
date: "2019-04-26T04:52:12Z"
permalink: "/whan/@anpigon/prisma-1"
tags:
  - "whan"
  - "kr"
  - "kr-dev"
  - "busy"
---
![](https://steemitimages.com/0x0/https://cdn.steemitimages.com/DQmXtBYt3kXFAhrVjuGUGa5TQrgUZ2nL8npNsg67WYqZQ57/11A557AA-ADD4-484C-AD9E-FCD37D09C38B.jpeg)
<sup>*Design by &#64;&#105;mrahelk*</sup>
___

안녕하세요. 안피곤입니다. 

무료 DB 서버 관련 이야기를 시작하면서 프리즈마(Prisma) 사용 방법을 시작하겠습니다.

<br>

# 무료 DB 서버 이야기
저는 가난한 개발자입니다. 비용이 거의 발생하지 않는 DB 서버가 필요합니다. 

예전에 사용하지 않는 안드로이드폰에 [**MariaDB Server 앱**](https://play.google.com/store/apps/details?id=com.esminis.server.mariadb)을 설치해서 DB서버처럼 사용하기도 했습니다. 안드로이드폰은 2~3년 정도 사용하면 정말 느려집니다. 게다가 재부팅이 자주 발생합니다. 왜그런걸까요?
![](https://cdn.steemitimages.com/150x0/https://cdn.pixabay.com/photo/2014/04/02/10/35/panda-303949_960_720.png) *WHY?*

<br>또는 [호스팅거](https://www.hostinger.kr/)처럼 저렴한 호스팅 서버에서 제공하는 작은 용량의 mysql을 사용하기도 했습니다. 호스팅 서버는 제약 사항이 너무 많습니다. 트래픽, DB쿼리횟수, 용량 등등... 외국 호스팅 서비스의 경우에는 CPU 점유율도 제한합니다. 

국내 호스팅 서비스 중에서 [닷홈](https://www.dothome.co.kr)이 저의 **최애** 서비스입니다. 잠깐 동안이었지만 서비스를 닷홈에서 운영했었습니다. 닷홈 무료 플랜의 경우 트래픽이나 용량을 예전 만큼 넉넉하게 주지 않아서 현재는 서비스를 운영하기에 매우 부족합니다. ㅠㅠ

그리고 호스팅 서버는 DB 외부 접속을 제공하지 않습니다. 그래서 API 서비스를 개발해서 구동해야합니다. 혹시 무료 호스팅 서버에 관심 있으면 다음 글을 읽어보세요. 워드프레스 개인 블로그를 운영하기에 적당합니다.
- [무료 웹 호스팅 사이트 (2019) : $ 0 비용으로 웹 사이트를 호스팅하는 방법](https://www.webhostingsecretrevealed.net/ko/blog/web-hosting-guides/free-hosting-sites/)

<br>쓰다보니 갑자기 호스팅 서버 이야기로 넘어갔네요. 최근에 알게된 **무료 몽고 DB 서비스**입니다.
[**mlab.com**](https://mlab.com/plans/pricing/) 와 [**mongodb.com**](https://www.mongodb.com/cloud/atlas/pricing) 입니다. 두 서비스 모두 512MB용량의 DB를 제공합니다. 그리고 aws, google cloud, azure 에서 호스팅되고 있습니다. 저는 현재는 개발 용도로만 사용하고 있어요.

<br><br><center>*</center><br>


# Prisma

프리즈마는 데이터베이스 도구 포함 ORM, 마이그레이션 및 관리자 UI (Postgres, MySQL 및 MongoDB) 입니다. 그리고 DB 프록시 서버 역할을 합니다. 

사용자는 GraphQL Schema만 정의하면 되고 DB는 설계할 필요가 없습니다. DB는 GraphQL 스키마를 기반으로 자동 생성됩니다. 그리고 DB의 모든 Schema와 Table을 GraphQL로 관리할 수 있습니다.  

참고로 프리즈마는 GraphQL 개발자와 Heroku 창업자가 같이 진행 중인 프로젝트라고 합니다. 프리즈마를 사용하기 위해서는 회원가입이 필요합니다.

<br>프리즈마 사이트에 접속합니다.
https://www.prisma.io/
![](https://files.steempeak.com/file/steempeak/anpigon/wEI0oJI4-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB209.33.15.png)

<br>로그인 하고 나면 다음 화면이 보입니다. 여기서 `ADD A SEVICE` 를 선택합니다.
![](https://files.steempeak.com/file/steempeak/anpigon/uPdxrf1O-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB209.41.41.png)

<br>다음 화면에 보이는 설명을 따라합니다.
![](https://files.steempeak.com/file/steempeak/anpigon/NbjRV6Jn-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB209.42.18.png)

콘솔창에서 prisma 를 설치하고 로그인합니다.

```
$ npm install -g prisma
$ prisma login -k eyJhbGciOiJIUz...
```

<br><br>

로그인에 성공하면 브라우저의 화면이 다음 화면으로 자동 전환됩니다. 여기서 `CREATE A NEW SERVICE` 를 선택합니다.

![](https://files.steempeak.com/file/steempeak/anpigon/MVDVqiZ3-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB209.44.07.png)

<br>그리고 다음 화면에 보이는 설명을 따라합니다.
![](https://files.steempeak.com/file/steempeak/anpigon/WpYu035a-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB209.44.35.png)

<br> 프로젝트를 생성합니다.
```
$  prisma init steem-community
```
![](https://files.steempeak.com/file/steempeak/anpigon/ILZf5nkV-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB209.46.13.png)

**Use existing database**를 선택하면 아래와 같이 Database를 선택하는 화면이 나옵니다. 저는 MongoDB를 선택했습니다. 관계형 DB를 원하시면 MySQL이나 PostgreSQL을 선택하셔도 됩니다. 옵션으로 MariaDB를 제공하지 않는 것이 많이 아쉽네요.

![](https://files.steempeak.com/file/steempeak/anpigon/HgfilYLH-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB209.50.42.png)

<br>하지만, 저는 **Demo Server**를 선택했습니다. ㅋ

![](https://files.steempeak.com/file/steempeak/anpigon/gVTtK05F-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB2010.21.32.png)

<br>프리즈마 프로젝트 생성이 완료되면 아래와 같이 출력됩니다.

![](https://files.steempeak.com/file/steempeak/anpigon/9HJY4tPA-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB2010.22.01.png)

<br>생성된 프로젝트에 들어가서 `deploy` 합니다. 이제 prisma 프로젝트가 생성되었습니다.

```
$ cd steem-community
$ prisma deploy
```

![](https://files.steempeak.com/file/steempeak/anpigon/hx3FSbJY-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB2010.23.24.png)

<br>

그리고 `datamodel.prisma` 파일을 살펴봅니다. 데이터 모델 파일입니다. 자세한 내용은 [공식 문서](https://www.prisma.io/docs/1.15/develop-prisma-service/service-configuration/data-model-knul/)를 참고하세요.

    type User ｛
      id: ID! @unique
      name: String!
    ｝

<br>

샘플로 생성된  `datamodel.prisma` 파일을 다음과 같이 수정합니다. 버전 업되면서 스펙이 조금 변경된 것 같습니다. 모델에 `@id`를 정의하라고 에러가 나네요.

    type User ｛
      id: ID! @id
      name: String!
    ｝


<br>

데이터 모델을 작성한 다음 `prisma deploy` 하면 DB가 생성됩니다. 이후로도 `datamodel.prisma` 파일를 수정하고 디플로이하면 DB에 바로 반영됩니다.

```
$ prisma deploy
```

<br>

마지막으로 prisma 어드민 페이지에 접속하면, 테이블이 생성된 것을 확인 할 수 있습니다.

![](https://files.steempeak.com/file/steempeak/anpigon/04EnqTVI-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E1848CE185A5E186AB2010.56.32.png)

<br>그리고 GraphQL API도 자동 생성됩니다.

![](https://files.steempeak.com/file/steempeak/anpigon/djPoo1S4-E18489E185B3E1848FE185B3E18485E185B5E186ABE18489E185A3E186BA202019-04-2620E1848BE185A9E18492E185AE201.31.24.png)

<br>여기까지 읽어주셔서 감사합니다.


***

<center>
### WHAN DEV TEAM
[\[출범식\] WDT(WHAN DEV TEAM) 공식 활동 개시](https://steemit.com/steemengine/@newbijohn/wdt-whan-dev-team)
[![](https://steemitimages.com/320x0/https://cdn.steemitimages.com/DQmbo4bis7WgjdVYdXR9VbzWdzh2aCXw2JFVKfruYNCNV4G/wdt.png)](https://steemit.com/steemengine/@newbijohn/wdt-whan-dev-team)


![](https://steemitimages.com/400x0/https://cdn.steemitimages.com/DQmQmWhMN6zNrLmKJRKhvSScEgWZmpb8zCeE2Gray1krbv6/BC054B6E-6F73-46D0-88E4-C88EB8167037.jpeg)
</center>


---

#####  <sub> **Sponsored ( Powered by [dclick](https://www.dclick.io) )** </sub>
[![dclick-imagead](https://s3.ap-northeast-2.amazonaws.com/dclick/image/msowner2/1555565468647.jpg)](https://api.dclick.io/v1/c?x=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjIjoiYW5waWdvbiIsInMiOiJwcmlzbWEtMSIsImEiOlsiaS0yMTYiXSwidXJsIjoiaHR0cDovL2JpdC5seS9tb29uU1RFRU1fS1IyIiwiaWF0IjoxNTU2MjU0Mzk0LCJleHAiOjE4NzE2MTQzOTR9.Pgf0KHwMMADYyXX3W5dTROf6a5pX8PpceZt20aoRzXs)